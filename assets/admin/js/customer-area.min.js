function getLicenseControlInput(a){return a.find(".cuar-js-license-key")}function getLicenseControlValidateButton(a){return a.find(".cuar-js-validate-button")}function getLicenseControlResultContainer(a){return a.find(".cuar-js-result > span")}function getLicenseControlAddOn(a){return getLicenseControlInput(a).data("addon")}function validateLicense(a,b){var c=getLicenseControlInput(b),d=getLicenseControlValidateButton(b),e=getLicenseControlResultContainer(b),f=c.val().trim();if(0==f.length)return void e.html("");e.html(cuar.checkingLicense).removeClass().addClass("cuar-ajax-running"),c.prop("disabled",!0),d.prop("disabled",!0);var g={action:"cuar_validate_license",addon_id:getLicenseControlAddOn(b),license:f};a.post(cuar.ajaxUrl,g,function(a){c.prop("disabled",!1),d.prop("disabled",!1),e.removeClass().addClass(a.success?"cuar-ajax-success":"cuar-ajax-failure").html(a.message)},"json",function(){c.prop("disabled",!1),d.prop("disabled",!1),e.removeClass().addClass("cuar-ajax-failure").html(cuar.unreachableLicenseServerError)})}!function(a){a.cuar||(a.cuar={}),a.cuar.addressManager=function(b,c){var d=this;d.fields=["name","company","line1","line2","zip","city","country","state","vat-number","logo-url"],d.isBusy=!1,d.$el=a(b),d.el=b,d.$el.data("cuar.addressManager",d),d.init=function(){d.options=a.extend({},a.cuar.addressManager.defaultOptions,c),d.$el.on("cuar:address:clear",d._onClearAddress),d.$el.on("cuar:address:set",d._onSetAddress),d.$el.on("cuar:address:get",d._onGetAddress),d.$el.on("cuar:address:getNonce",d._onGetNonce),d.$el.on("cuar:address:getAddressId",d._onGetAddressId),d.$el.on("cuar:address:isEmpty",d._onIsAddressEmpty),d.$el.on("cuar:address:setBusy",d._onSetBusy),d.$el.on("cuar:address:isBusy",d._onIsBusy),d.$el.on("cuar:address:loadFromOwner",d._onLoadAddressFromOwner),d.$el.on("cuar:address:saveForOwner",d._onSaveAddressForOwner),d.$el.on("click",".cuar-js-action.cuar-js-reset",d._onResetAddressAction)},d._onLoadAddressFromOwner=function(b,c){if(d._onIsBusy())return!1;if(null==c)return void alert(cuar.addressMustPickOwnerFirst);var e=d._onIsAddressEmpty();if(!e&&!confirm(cuar.addressConfirmLoadAddressFromOwner))return!1;var f={action:"cuar_load_address_from_owner",cuar_nonce:d._onGetNonce(),owner:c,address_id:d._onGetAddressId()};d._onSetBusy(null,!0),a.post(cuar.ajaxUrl,f,function(a){return d._onSetBusy(null,!1),0==a.success?void alert(a.data):void(null!=a.data.address?d._onSetAddress(null,a.data.address):alert(cuar.addressNoAddressFromOwner))})},d._onSaveAddressForOwner=function(b,c){if(d._onIsBusy())return!1;if(null==c)return void alert(cuar.addressMustPickOwnerFirst);if(!confirm(cuar.addressConfirmSaveAddressForOwner))return!1;var e={action:"cuar_save_address_for_owner",cuar_nonce:d._onGetNonce(),owner:c,address_id:d._onGetAddressId(),address:d._onGetAddress()};d._onSetBusy(null,!0),a.post(cuar.ajaxUrl,e,function(a){if(d._onSetBusy(null,!1),0==a.success)return void alert(a.data)})},d._onResetAddressAction=function(a){return a.preventDefault(),!d._onIsBusy()&&(!!confirm(cuar.addressConfirmResetAddress)&&void d._onClearAddress(null))},d._onClearAddress=function(a){d._onSetAddress(null,{name:"",company:"",line1:"",line2:"",zip:"",city:"",vat_number:"",logo_url:"",country:"",state:""})},d._onIsBusy=function(a){return d.isBusy},d._onSetBusy=function(a,b){d.isBusy=b,b?(d._getProgressIndicator().show(),d._getActions().addClass("button-disabled"),d._getInputFields().attr("disabled","disabled"),d._getInputContainers().addClass("disabled")):(d._getProgressIndicator().hide(),d._getActions().removeClass("button-disabled"),d._getInputFields().removeAttr("disabled"),d._getInputContainers().removeClass("disabled"))},d._onIsAddressEmpty=function(a){for(var b=0;b<d.fields.length;b++){var c=d.fields[b],e=d._getField(c).val();if(null!=e&&e.length>0)return!1}return!0},d._onGetAddress=function(a){for(var b={},c=0;c<d.fields.length;c++){var e=d.fields[c];b[e]=d._getField(e).val()}return b},d._onSetAddress=function(a,b){for(var c=0;c<d.fields.length;c++){var e=d.fields[c],f=d._getField(e);"country"==e?f.val(b[e]).trigger("change"):"state"==e?(f.val(b[e]),f.data("pending-value",b[e])):"vat_number"==e?f.val(b["vat-number"]):"logo_url"==e?f.val(b["logo-url"]):f.val(b[e])}},d._onGetNonce=function(){return a("input[name=cuar_nonce]",d.el).val()},d._onGetAddressId=function(){return d.$el.data("address-id")},d._getField=function(b){var c=".cuar-js-address-";return c+="vat_number"==b?"vat-number":"logo_url"==b?"logo-url":b,a(c,d.el).find(".cuar-js-address-field:input")},d._getActions=function(){return a(".cuar-js-action",d.el)},d._getProgressIndicator=function(){return a(".cuar-js-progress",d.el)},d._getInputFields=function(){return a(".cuar-js-address-field",d.el)},d._getInputContainers=function(){return a(".cuar-js-address-field-container",d.el)},d.init()},a.cuar.addressManager.defaultOptions={},a.fn.addressManager=function(b){return this.each(function(){new a.cuar.addressManager(this,b)})}}(jQuery),function(a){a.cuar||(a.cuar={}),a.cuar.bindCountryStateInputs=function(b,c){var d=this;d.$el=a(b),d.el=b,d.isBusy=!1,d.$el.data("cuar.bindCountryStateInputs",d),d.init=function(){d.options=a.extend({},a.cuar.bindCountryStateInputs.defaultOptions,c),d._getCountryField().select2(d.options.select2),d._getStateField().select2(d.options.select2),d._getCountryField().on("change",d._onCountryChanged)},d._onCountryChanged=function(){var b=d._getCountryField(),c=d._getStateField(),e=d._getStateFieldContainer(),f=b.val();if(null==f||""==f.length||"undefined"==typeof f)return void e.hide();var g={action:"cuar_get_country_states",country:f,address_id:d._getAddressId(),cuar_nonce:d._getNonce()};d._setAddressBusy(!0),a.post(cuar.ajaxUrl,g,function(a){return d._setAddressBusy(!1),0==a.success?void alert(a.data):(null!=a.data.states?(c.html(a.data.htmlOptions).select2(d.options.select2),c.val(c.data("pending-value")).trigger("change"),e.show()):(c.val("").trigger("change"),e.hide()),void c.data("pending-value",""))})},d._isAddressBusy=function(){return d._getFieldContainer().triggerHandler("cuar:address:setBusy")},d._setAddressBusy=function(a){d._getFieldContainer().trigger("cuar:address:setBusy",[a])},d._getFieldContainer=function(){return d.$el.parents(d.options.fieldContainer)},d._getNonce=function(){return d._getFieldContainer().triggerHandler("cuar:address:getNonce")},d._getAddressId=function(){return d._getFieldContainer().triggerHandler("cuar:address:getAddressId")},d._getCountryField=function(){return a(d.options.countrySelector,d.el).find("select")},d._getStateFieldContainer=function(){return a(d.options.stateSelector,d.el)},d._getStateField=function(){return a(d.options.stateSelector,d.el).find("select")},d.init()},a.cuar.bindCountryStateInputs.defaultOptions={fieldContainer:".cuar-js-address",countrySelector:".cuar-js-address-country",stateSelector:".cuar-js-address-state",select2:{width:"100%",allowClear:!0,placeholder:"",dropdownParent:a(a("body").hasClass("wp-admin")?"body":"#cuar-js-content-container")}},a.fn.bindCountryStateInputs=function(b){return this.each(function(){new a.cuar.bindCountryStateInputs(this,b)})}}(jQuery),function(a){a.cuar||(a.cuar={}),a.cuar.classicUploader=function(b,c){var d=this;d.$el=a(b),d.el=b,d.$el.data("cuar.classicUploader",d),d.init=function(){d.options=a.extend({},a.cuar.classicUploader.defaultOptions,c),d._getFileInput().css({opacity:0});var b=d._getPostId(),e="cuar_classic-upload_"+b,f={action:"cuar_attach_file",method:"classic-upload",post_id:b};f[e]=d._getNonce();var g=d._getDropZone();g.fileupload({url:cuar.ajaxUrl,dataType:"json",paramName:"cuar_file",formData:f,dropZone:g,add:d._onFileUploadAdd,done:d._onFileUploadDone,fail:d._onFileUploadFail,progress:d._onFileUploadProgress}),a(document).bind("dragover",d._onDragOverDropZone)},d._onDragOverDropZone=function(a){var b=d._getDropZone(),c=window.dropZoneTimeout;c?clearTimeout(c):b.addClass("in");var e=!1,f=a.target;do{if(f===b[0]){e=!0;break}f=f.parentNode}while(null!=f);e?b.addClass("hover"):b.removeClass("hover"),window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null,b.removeClass("in hover")},100)},d._onFileUploadAdd=function(b,c){for(var e=0,f=c.files.length;e<f;e++){var g=c.files[e].name;if(c.files[e].attachmentItem=a(document).triggerHandler("cuar:attachmentManager:addItem",[d._getPostId(),g,g]),null==c.files[e].attachmentItem)return!1;a(document).trigger("cuar:attachmentManager:updateItemState",[c.files[e].attachmentItem,"pending"])}c.submit()},d._onFileUploadDone=function(b,c){for(var e=0,f=c.files.length;e<f;e++)if(c.result.success){var g=c.result.data.file,h=c.result.data.caption;a(document).trigger("cuar:attachmentManager:updateItem",[c.files[e].attachmentItem,d._getPostId(),g,h]),a(document).trigger("cuar:attachmentManager:updateItemState",[c.files[e].attachmentItem,"success"])}else{var i=null;c.result.data.length>0&&(i=c.result.data[0]),a(document).trigger("cuar:attachmentManager:showError",[c.files[e].attachmentItem,c.files[e].name,i,!0])}},d._onFileUploadFail=function(b,c){for(var d=0,e=c.files.length;d<e;d++)a(document).trigger("cuar:attachmentManager:showError",[c.files[d].attachmentItem,c.files[d].name,c.errorThrown,!0])},d._onFileUploadProgress=function(b,c){for(var d=0,e=c.files.length;d<e;d++){var f=parseInt(c.loaded/c.total*100,10);a(document).trigger("cuar:attachmentManager:updateItemProgress",[c.files[d].attachmentItem,f])}},d._getNonce=function(){return a("#cuar_classic-upload_"+d._getPostId(),d.el).val()},d._getPostId=function(){return d.$el.data("post-id")},d._getDropZone=function(){return a(d.options.dropzone,d.el).first()},d._getFileInput=function(){return a(d.options.fileInput,d.el).first()},d.init()},a.cuar.classicUploader.defaultOptions={dropzone:".cuar-js-dropzone",fileInput:".cuar-js-file-input"},a.fn.classicUploader=function(b){return this.each(function(){new a.cuar.classicUploader(this,b)})}}(jQuery),function(a){a.cuar||(a.cuar={}),a.cuar.fileAttachmentManager=function(b,c){var d=this;d.$el=a(b),d.el=b,d.$el.data("cuar.fileAttachmentManager",d),d.init=function(){d.options=a.extend({},a.cuar.fileAttachmentManager.defaultOptions,c),d._getSelectors().first().show(),d._getSelectorInput().change(d._onSelectorInputChanged),d._getAttachmentList().on("click",d.options.removeAction,d._onRemoveActionClick),d._getErrorList().on("click",d.options.dismissAction,d._onDismissError),a(document).on("cuar:attachmentManager:addItem",d._onAddAttachmentItem),a(document).on("cuar:attachmentManager:sendFile",d._onSendFile),a(document).on("cuar:attachmentManager:updateFile",d._onUpdateFile),a(document).on("cuar:attachmentManager:updateItem",d._onUpdateAttachmentItem),a(document).on("cuar:attachmentManager:updateItemProgress",d._onUpdateAttachmentItemProgress),a(document).on("cuar:attachmentManager:updateItemState",d._onUpdateAttachmentItemState),a(document).on("cuar:attachmentManager:showError",d._onShowError)},d._onShowError=function(a,b,c,e,f){d._showError(b,c,e,f)},d._onUpdateAttachmentItem=function(a,b,c,e,f){return 0==b.length?void console.log("_onUpdateAttachmentItem :: Item for not found"):void d._updateAttachmentItem(b,c,e,f)},d._onUpdateAttachmentItemProgress=function(a,b,c){return 0==b.length?void console.log("_onUpdateAttachmentItemProgress :: Item not found"):void d._updateAttachmentItemProgress(b,c)},d._onUpdateAttachmentItemState=function(a,b,c){return 0==b.length?void console.log("_onUpdateAttachmentItemState :: Item not found"):void d._updateAttachmentItemState(b,c)},d._onSelectorInputChanged=function(){var b=d._getSelectors(),c=a(this).val(),e=b.filter(function(){return a(this).data("method")==c});if(!e.is(":visible")){var f=b.filter(":visible");f.length<=0?e.fadeIn():f.fadeOut("fast",function(){e.fadeIn()})}},d._onRemoveActionClick=function(b){if(b.preventDefault(),confirm(cuar.confirmDeleteAttachedFile)){var c=a(this).closest(d.options.attachmentItem),e=c.data("post-id"),f=c.data("filename"),g=d._getAttachmentListRemoveNonce();d._updateAttachmentItemState(c,"pending");var h={action:"cuar_remove_attached_file",post_id:e,filename:f,cuar_remove_attachment_nonce:g};a.post(cuar.ajaxUrl,h,function(a){if(0==a.success){var b="";a.data.length>0&&(b=a.data[0]),d._showError(c,f,b,!1)}else d._removeItem(c)})}},d._onSendFile=function(b,c,e,f,g,h,i,j){var k=i;void 0!==i&&0!=i.trim().length||(k=h),d._updateAttachmentItem(c,f,h,k),d._updateAttachmentItemState(c,"pending");var l={action:"cuar_attach_file",method:e,post_id:f,filename:h,caption:k,extra:j},m="cuar_"+e+"_"+f;l[m]=g,a.post(cuar.ajaxUrl,l,function(b){if(0==b.success){var e="";b.data.length>0&&(e=b.data[0]),d._showError(c,h,e,!0)}else{var g=b.data.file,i=b.data.caption;d._updateAttachmentItem(c,f,g,i),d._updateAttachmentItemState(c,"success"),a(document).trigger("cuar:attachmentManager:fileAttached",[c,f,h,g,i])}})},d._onUpdateFile=function(b,c,e,f,g,h){var i=h;void 0!==h&&0!=h.trim().length||(i=g),d._updateAttachmentItemState(c,"pending");var j={action:"cuar_update_attached_file",post_id:e,filename:g,caption:i,cuar_update_attachment_nonce:f};a.post(cuar.ajaxUrl,j,function(a){if(0==a.success){var b="";a.data.length>0&&(b=a.data[0]),d._showError(c,g,b,!0)}else{var f=a.data.file,h=a.data.caption;d._updateAttachmentItem(c,e,f,h),d._updateAttachmentItemState(c,"success")}})},d._onAddAttachmentItem=function(a,b,c,e,f){if(cuar.maxAttachmentCount>0&&d._getAttachmentItems().length>=cuar.maxAttachmentCount)return d._showError(null,c,cuar.tooManyAttachmentsAlready,!0),null;var g=d._getAttachmentTemplate().clone();return g.appendTo(d.options.attachmentList),d._updateAttachmentItem(g,b,c,e),d._getAttachmentListEmptyMessage().hide(),g},d._removeItem=function(a){a.fadeOut(400,function(){d._getAttachmentItems().length<=1&&d._getAttachmentListEmptyMessage().show(),a.remove()})},d._updateAttachmentItem=function(a,b,c,d){void 0!==d&&0!=d.trim().length||(d=c),a.data("post-id",b),a.data("filename",c),a.children(".cuar-js-caption").html(d)},d._updateAttachmentItemState=function(b,c){b.removeClass(function(a,b){return(b.match(/(^|\s)cuar-js-state-\S+/g)||[]).join(" ")}),b.addClass("cuar-js-state-"+c);var e=b.children(".cuar-js-actions"),f=b.children(".cuar-js-progress");switch(c){case"pending":e.hide(),f.show(),d._updateAttachmentItemProgress(b,0);break;case"error":e.show(),f.hide();break;case"success":e.show(),f.hide()}a(document).trigger("cuar:attachmentManager:itemStateUpdated",[b,c])},d._updateAttachmentItemProgress=function(a,b){var c=a.children(".cuar-js-progress"),d=c.children(".indeterminate"),e=c.children(".determinate");b<=0?(d.show(),e.hide()):(d.hide(),e.show(),e.css({width:b+"%"}))},d._showError=function(a,b,c,e){if(null!=a&&(console.log(a),console.log(e),e?d._removeItem(a):d._updateAttachmentItemState(a,"error")),null!=c&&c.length>0){null!=b&&b.length>0&&(c="<strong>"+b+"</strong> - "+c);var f=d._getErrorTemplate().clone();f.find(".cuar-js-message").html(c),f.appendTo(d.options.errorList,d.el),f.show()}},d._onDismissError=function(b){a(this).closest(".cuar-js-error").remove(),b.preventDefault()},d._getErrorList=function(){return a(d.options.errorList,d.el)},d._getAttachmentList=function(){return a(d.options.attachmentList)},d._getAttachmentListEmptyMessage=function(){return d._getAttachmentList().find(".cuar-js-empty-message")},d._getAttachmentItems=function(){return d._getAttachmentList().find(d.options.attachmentItem)},d._getAttachmentItemByFilename=function(b){return d._getAttachmentItems().filter(function(){return a(this).data("filename")==b})},d._getAttachmentListRemoveNonce=function(){return a("#cuar_remove_attachment_nonce",d._getAttachmentList()).val()},d._getErrorTemplate=function(){return a(d.options.errorTemplate,d.el).children(".cuar-js-error").first()},d._getAttachmentTemplate=function(){return a(d.options.attachmentItemTemplate).find(d.options.attachmentItem).first()},d._getSelectorInput=function(){return a(d.options.selectorInput,d.el)},d._getSelectors=function(){return a(d.options.selectorList+">"+d.options.selectorItem,d.el)},d.init()},a.cuar.fileAttachmentManager.defaultOptions={errorList:".cuar-js-file-attachment-errors",attachmentList:".cuar-js-file-attachments",attachmentItem:".cuar-js-file-attachment",attachmentItemTemplate:".cuar-js-file-attachment-template",errorTemplate:".cuar-js-error-template",selectorList:".cuar-js-file-selectors",selectorItem:".cuar-js-file-selector",selectorInput:".cuar-js-file-selector-input",removeAction:".cuar-js-remove-action",dismissAction:".cuar-js-dismiss"},a.fn.fileAttachmentManager=function(b){return this.each(function(){new a.cuar.fileAttachmentManager(this,b)})}}(jQuery),function(a){a.cuar||(a.cuar={}),a.cuar.ftpUploader=function(b,c){var d=this;d.$el=a(b),d.el=b,d.$el.data("cuar.ftpUploader",d),d.init=function(){d.options=a.extend({},a.cuar.ftpUploader.defaultOptions,c),d._getAddButton().click(d._onAddButtonClicked),a(document).on("cuar:attachmentManager:fileAttached",d._removeFileFromSelect)},d._removeFileFromSelect=function(b,c,e,f,g,h){var i=d._getFtpOperation();"ftp-move"==i&&d._getSelectBox().children().filter(function(){return a(this).val()==f}).remove()},d._onAddButtonClicked=function(b){b.preventDefault();var c=d._getSelectedFiles(),e=d._getPostId(),f=d._getFtpOperation();if(null!=c&&0!=c.length)for(var g=0,h=c.length;g<h;g++){var i=c[g],j=a(document).triggerHandler("cuar:attachmentManager:addItem",[e,i,i]);null!=j&&a(document).trigger("cuar:attachmentManager:sendFile",[j,"ftp-folder",e,d._getNonce(),i,"",f])}},d._getFtpOperation=function(){return d._getCopyCheckbox().is(":checked")?"ftp-copy":"ftp-move"},d._getNonce=function(){return a("#cuar_ftp-folder_"+d._getPostId(),d.el).val()},d._getPostId=function(){return d.$el.data("post-id")},d._getSelectedFiles=function(){return d._getSelectBox().val()},d._getAddButton=function(){return a(d.options.addButton,d.el)},d._getSelectBox=function(){return a(d.options.selectBox,d.el).first()},d._getCopyCheckbox=function(){return a(d.options.copyCheckbox,d.el).first()},d.init()},a.cuar.ftpUploader.defaultOptions={addButton:".cuar-js-ftp-add-files",selectBox:".cuar-js-ftp-file-selection",copyCheckbox:".cuar-js-copy-file-checkbox"},a.fn.ftpUploader=function(b){return this.each(function(){new a.cuar.ftpUploader(this,b)})}}(jQuery),function(a){a.cuar||(a.cuar={}),a.cuar.ajaxFolderAction=function(b,c){var d=this;d.$el=a(b),d.el=b,d.$el.data("cuar.ajaxFolderAction",d),d.init=function(){d.options=a.extend({},a.cuar.ajaxFolderAction.defaultOptions,c),d._getButton().click(d._onButtonClicked)},d._onButtonClicked=function(b){b.preventDefault();var c={action:"cuar_folder_action",folder_action:d._getAction(),path:d._getPath(),extra:d._getExtra()};d.$el.css("opacity","0.5"),d._getButton().bind("click",function(a){a.preventDefault()}),a.post(cuar.ajaxUrl,c,function(a){if(d.$el.css("opacity","1"),0==a.success)null!=a.data&&a.data.length>0&&alert(a.data),d._getButton().click(d._onButtonClicked);else{var b=d._getSuccessMessage();null!=b&&b.length>0?d.$el.removeClass("cuar-error").addClass("cuar-info").html(b):d.$el.remove()}})},d._getButton=function(){return a(".button",d.el)},d._getPath=function(){return d.$el.data("path")},d._getAction=function(){return d.$el.data("action")},d._getExtra=function(){return d.$el.data("extra")},d._getSuccessMessage=function(){return d.$el.data("success-message")},d.init()},a.fn.ajaxFolderAction=function(b){return this.each(function(){new a.cuar.ajaxFolderAction(this,b)})}}(jQuery),jQuery(document).ready(function(a){a(".cuar-js-license-field").each(function(){var b=a(this);b.on("click",".cuar-js-validate-button",function(c){return c.preventDefault(),validateLicense(a,b),!1})})}),function(a){a.cuar||(a.cuar={}),a.cuar.mediaInputControl=function(b,c){var d=this;d.$el=a(b),d.el=b,d.isBusy=!1,d.fileFrame=null,d.$el.data("cuar.mediaInputControl",d),d.init=function(){d.options=a.extend({},a.cuar.mediaInputControl.defaultOptions,c),d.$el.on("click",".cuar-upload-button",d._onUploadButtonClicked)},d._onUploadButtonClicked=function(b){b.preventDefault();var c=a(this);return d.fileFrame?void d.fileFrame.open():(d.fileFrame=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",title:c.data("uploader_title"),button:{text:c.data("uploader_button_text")},multiple:!1}),d.fileFrame.on("menu:render:default",function(a){var b={};a.unset("library-separator"),a.unset("gallery"),a.unset("featured-image"),a.unset("embed"),a.set(b)}),d.fileFrame.on("insert",function(){var a=d.fileFrame.state().get("selection");a.each(function(a,b){a=a.toJSON(),d._getUrlInputField().val(a.url)})}),void d.fileFrame.open())},d._getUrlInputField=function(){return a(d.options.urlInputSelector,d.el)},d.init()},a.cuar.mediaInputControl.defaultOptions={urlInputSelector:".cuar-upload-input"},a.fn.mediaInputControl=function(b){return this.each(function(){new a.cuar.mediaInputControl(this,b)})}}(jQuery);
//# sourceMappingURL=customer-area.js.map