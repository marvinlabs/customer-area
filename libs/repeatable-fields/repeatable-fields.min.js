/*
 * jQuery Repeatable Fields v1.3.1
 * http://www.rhyzz.com/repeatable-fields.html
 *
 * Copyright (c) 2014-2015 Rhyzz
 * License MIT
*/

!function(e){e.fn.repeatable_fields=function(t){function o(t){e(n.wrapper,t).each(function(){var t=this,r=e(t).children(n.container);e(r).children(n.template).hide().find(":input").each(function(){e(this).prop("disabled",!0)});var a=e(r).children(n.row).filter(function(){return!e(this).hasClass(n.template.replace(".",""))}).length;if(e(r).attr("data-rf-row-count",a),e(t).on("click",n.add,function(t){t.stopImmediatePropagation();var a=e(e(r).children(n.template).clone().removeClass(n.template.replace(".",""))[0].outerHTML);e(a).find(":input").each(function(){e(this).prop("disabled",!1)}),"function"==typeof n.before_add&&n.before_add(r);var i=e(a).show().appendTo(r);"function"==typeof n.after_add&&n.after_add(r,i),o(i)}),e(t).on("click",n.remove,function(t){t.stopImmediatePropagation();var o=e(this).parents(n.row).first();"function"==typeof n.before_remove&&n.before_remove(r,o),o.remove(),"function"==typeof n.after_remove&&n.after_remove(r)}),n.is_sortable===!0&&"undefined"!=typeof e.ui&&"undefined"!=typeof e.ui.sortable){var i=null!==n.sortable_options?n.sortable_options:{};i.handle=n.move,e(t).find(n.container).sortable(i)}})}function r(t,o){var r=e(t).attr("data-rf-row-count");r++,e("*",o).each(function(){e.each(this.attributes,function(){this.value=this.value.replace(/{{row-count-placeholder}}/,r-1)})}),e(t).attr("data-rf-row-count",r)}var a={wrapper:".wrapper",container:".container",row:".row",add:".add",remove:".remove",move:".move",template:".template",is_sortable:!0,before_add:null,after_add:r,before_remove:null,after_remove:null,sortable_options:null},n=e.extend(a,t);o(this)}}(jQuery);